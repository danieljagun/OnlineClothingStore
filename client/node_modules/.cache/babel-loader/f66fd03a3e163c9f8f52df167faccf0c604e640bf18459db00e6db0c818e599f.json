{"ast":null,"code":"var _jsxFileName = \"/Users/daniel/Desktop/OnlineClothingStore/client/src/components/AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useApi } from '../hooks/useApi';\nimport { useAuth } from '../context/authContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminDashboard() {\n  _s();\n  const {\n    fetchItems,\n    updateItem,\n    deleteItem,\n    fetchOrders\n  } = useApi();\n  const [items, setItems] = useState([]);\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const {\n    token\n  } = useAuth(); // Ensure token is passed if needed\n\n  // Define fetchData outside useEffect\n  const fetchData = async () => {\n    try {\n      console.log(\"Fetching items and orders...\");\n      const fetchedItems = await fetchItems();\n      const fetchedOrders = await fetchOrders(token);\n      console.log(\"Items fetched:\", fetchedItems.data);\n      console.log(\"Orders fetched:\", fetchedOrders.data);\n      setItems(fetchedItems.data);\n      setOrders(fetchedOrders.data);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchData();\n  }, [fetchData, token]);\n  const handleUpdateStock = async (itemId, newStock) => {\n    await updateItem(itemId, {\n      stock: newStock\n    }, token);\n    fetchData(); // Refetch all data\n  };\n  const handleDeleteItem = async itemId => {\n    await deleteItem(itemId, token);\n    fetchData(); // Refetch all data\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading dashboard...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 25\n  }, this);\n  if (!items.length && !orders.length) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"No data to display.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 49\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Inventory\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: items.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [item.name, \" - In Stock: \", item.stock, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleUpdateStock(item._id, item.stock + 1),\n          children: \"Increase Stock\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleUpdateStock(item._id, item.stock - 1),\n          children: \"Decrease Stock\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDeleteItem(item._id),\n          children: \"Delete Item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 25\n        }, this)]\n      }, item._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Orders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: orders.map(order => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [\"Order ID: \", order._id, \", Total: $\", order.total, \", User ID: \", order.user]\n      }, order._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n_s(AdminDashboard, \"iLtUn8TUfjfJU1jIgBq0NF4l9iA=\", false, function () {\n  return [useApi, useAuth];\n});\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useApi","useAuth","jsxDEV","_jsxDEV","AdminDashboard","_s","fetchItems","updateItem","deleteItem","fetchOrders","items","setItems","orders","setOrders","loading","setLoading","token","fetchData","console","log","fetchedItems","fetchedOrders","data","error","handleUpdateStock","itemId","newStock","stock","handleDeleteItem","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","item","name","onClick","_id","order","total","user","_c","$RefreshReg$"],"sources":["/Users/daniel/Desktop/OnlineClothingStore/client/src/components/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useApi } from '../hooks/useApi';\nimport { useAuth } from '../context/authContext';\n\nfunction AdminDashboard() {\n    const { fetchItems, updateItem, deleteItem, fetchOrders } = useApi();\n    const [items, setItems] = useState([]);\n    const [orders, setOrders] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const { token } = useAuth(); // Ensure token is passed if needed\n\n    // Define fetchData outside useEffect\n    const fetchData = async () => {\n        try {\n            console.log(\"Fetching items and orders...\");\n            const fetchedItems = await fetchItems();\n            const fetchedOrders = await fetchOrders(token);\n            console.log(\"Items fetched:\", fetchedItems.data);\n            console.log(\"Orders fetched:\", fetchedOrders.data);\n            setItems(fetchedItems.data);\n            setOrders(fetchedOrders.data);\n        } catch (error) {\n            console.error(\"Error fetching data:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchData();\n    }, [fetchData, token]);\n\n    const handleUpdateStock = async (itemId, newStock) => {\n        await updateItem(itemId, { stock: newStock }, token);\n        fetchData(); // Refetch all data\n    };\n\n    const handleDeleteItem = async (itemId) => {\n        await deleteItem(itemId, token);\n        fetchData(); // Refetch all data\n    };\n\n    if (loading) return <p>Loading dashboard...</p>;\n    if (!items.length && !orders.length) return <p>No data to display.</p>;\n\n    return (\n        <div>\n            <h1>Admin Dashboard</h1>\n            <h2>Inventory</h2>\n            <ul>\n                {items.map(item => (\n                    <li key={item._id}>\n                        {item.name} - In Stock: {item.stock}\n                        <button onClick={() => handleUpdateStock(item._id, item.stock + 1)}>Increase Stock</button>\n                        <button onClick={() => handleUpdateStock(item._id, item.stock - 1)}>Decrease Stock</button>\n                        <button onClick={() => handleDeleteItem(item._id)}>Delete Item</button>\n                    </li>\n                ))}\n            </ul>\n            <h2>Orders</h2>\n            <ul>\n                {orders.map(order => (\n                    <li key={order._id}>\n                        Order ID: {order._id}, Total: ${order.total}, User ID: {order.user}\n                    </li>\n                ))}\n            </ul>\n        </div>\n    );\n}\n\nexport default AdminDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}