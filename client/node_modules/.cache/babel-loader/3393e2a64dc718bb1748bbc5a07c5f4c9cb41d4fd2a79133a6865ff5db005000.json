{"ast":null,"code":"var _jsxFileName = \"/Users/daniel/Desktop/OnlineClothingStore/client/src/components/AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useApi } from '../hooks/useApi';\nimport { useAuth } from '../context/authContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminDashboard() {\n  _s();\n  const {\n    fetchItems,\n    updateItem,\n    deleteItem,\n    fetchOrders\n  } = useApi();\n  const [items, setItems] = useState([]);\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const {\n    token\n  } = useAuth();\n  const fetchData = useCallback(async () => {\n    if (token) {\n      // Ensure token is not undefined\n      try {\n        setLoading(true);\n        const itemsResponse = await fetchItems({\n          token\n        });\n        const ordersResponse = await fetchOrders({\n          token\n        });\n        setItems(itemsResponse.data.data); // Ensure you're accessing the data correctly based on your API response structure\n        setOrders(ordersResponse.data);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      } finally {\n        setLoading(false);\n      }\n    }\n  }, [fetchItems, fetchOrders, token]);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  const handleUpdateStock = async (itemId, newStock) => {\n    try {\n      await updateItem(itemId, {\n        stock: newStock\n      }, token);\n      fetchData();\n    } catch (error) {\n      console.error(\"Failed to update stock:\", error);\n    }\n  };\n  const handleDeleteItem = async itemId => {\n    try {\n      await deleteItem(itemId, token);\n      fetchData();\n    } catch (error) {\n      console.error(\"Failed to delete item:\", error);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading dashboard...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 25\n  }, this);\n  if (!items.length && !orders.length) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"No data to display.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 49\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Inventory\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: items.map(item => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [item.name, \" - In Stock: \", item.stock, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleUpdateStock(item._id, item.stock + 1),\n          children: \"Increase Stock\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleUpdateStock(item._id, item.stock - 1),\n          children: \"Decrease Stock\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDeleteItem(item._id),\n          children: \"Delete Item\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 25\n        }, this)]\n      }, item._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Orders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: orders.map(order => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [\"Order ID: \", order._id, \", Total: $\", order.total, \", User ID: \", order.user]\n      }, order._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(AdminDashboard, \"cFYmc68dw3sGNjB0v0iInm4MsfY=\", false, function () {\n  return [useApi, useAuth];\n});\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useApi","useAuth","jsxDEV","_jsxDEV","AdminDashboard","_s","fetchItems","updateItem","deleteItem","fetchOrders","items","setItems","orders","setOrders","loading","setLoading","token","fetchData","itemsResponse","ordersResponse","data","error","console","handleUpdateStock","itemId","newStock","stock","handleDeleteItem","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","item","name","onClick","_id","order","total","user","_c","$RefreshReg$"],"sources":["/Users/daniel/Desktop/OnlineClothingStore/client/src/components/AdminDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useApi } from '../hooks/useApi';\nimport { useAuth } from '../context/authContext';\n\nfunction AdminDashboard() {\n    const { fetchItems, updateItem, deleteItem, fetchOrders } = useApi();\n    const [items, setItems] = useState([]);\n    const [orders, setOrders] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const { token } = useAuth();\n\n    const fetchData = useCallback(async () => {\n        if (token) { // Ensure token is not undefined\n            try {\n                setLoading(true);\n                const itemsResponse = await fetchItems({ token });\n                const ordersResponse = await fetchOrders({ token });\n                setItems(itemsResponse.data.data); // Ensure you're accessing the data correctly based on your API response structure\n                setOrders(ordersResponse.data);\n            } catch (error) {\n                console.error(\"Error fetching data:\", error);\n            } finally {\n                setLoading(false);\n            }\n        }\n    }, [fetchItems, fetchOrders, token]);\n\n    useEffect(() => {\n        fetchData();\n    }, [fetchData]);\n\n    const handleUpdateStock = async (itemId, newStock) => {\n        try {\n            await updateItem(itemId, { stock: newStock }, token);\n            fetchData();\n        } catch (error) {\n            console.error(\"Failed to update stock:\", error);\n        }\n    };\n\n    const handleDeleteItem = async (itemId) => {\n        try {\n            await deleteItem(itemId, token);\n            fetchData();\n        } catch (error) {\n            console.error(\"Failed to delete item:\", error);\n        }\n    };\n\n    if (loading) return <p>Loading dashboard...</p>;\n    if (!items.length && !orders.length) return <p>No data to display.</p>;\n\n    return (\n        <div>\n            <h1>Admin Dashboard</h1>\n            <h2>Inventory</h2>\n            <ul>\n                {items.map(item => (\n                    <li key={item._id}>\n                        {item.name} - In Stock: {item.stock}\n                        <button onClick={() => handleUpdateStock(item._id, item.stock + 1)}>Increase Stock</button>\n                        <button onClick={() => handleUpdateStock(item._id, item.stock - 1)}>Decrease Stock</button>\n                        <button onClick={() => handleDeleteItem(item._id)}>Delete Item</button>\n                    </li>\n                ))}\n            </ul>\n            <h2>Orders</h2>\n            <ul>\n                {orders.map(order => (\n                    <li key={order._id}>\n                        Order ID: {order._id}, Total: ${order.total}, User ID: {order.user}\n                    </li>\n                ))}\n            </ul>\n        </div>\n    );\n}\n\nexport default AdminDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}